@startuml

'Package Client'

package client{
        interface ComListener {
                # void onTrameReceived(String)
        }

        interface StateListener {
                + State : enum
                + void onStateChanged(State)
        }

        enum State{
                INITIAL
                CONNECTING
                CONNECTED
                DISCONNECTING
        }

        class Client {
                - m_com : CommunicationHandler
                - m_pseudo : String
                - m_connectWindow : ConnexionWindow
                - m_chatWindow : ChatClientWindow 
        }

        class CommunicationHandler {
                + {static} TIMEOUT : final int 
                - m_sock : Socket      
                - m_state : StateListener.State
                - m_stateListeners : ArrayList<StateListener>
                - m_comListeners : ArrayList<ComListener>
                - m_quit : boolean

                + void stop()
                - void changeState(StateListener.State)
                + StateListener.State getState()
                + CommunicationHandler()
                + addStateListener(StateListener)
                + addComListener(ComListener)
                + void configure(String, int)
                + void disconnect()
                + void post(String)
        }
}

'Fin Package client'

'Package IHMAuto'

package IHMAuto{
        interface ChatListener {
            + void askDeconnection()
            + void askInitialization()
            + void sendMessage(String)
            + void StatusChanged(int)
        }

        interface InfoConnectListener {
            + void askForConnect(String, String, int)
        }

        class ConnexionWindow {
        }

        class ChatClientWindow {
        }

        class ChatAdminWindow {
        }

        class ConnexionAdminWindow {
        }
}
'Fin package IHMAuto'


'Package server'

package server {
        interface IDataPool {
            + ArrayList<String> getUserPool()
        }

        class Server {
                - m_conversation : ArrayList<String>
                - m_userList : ArrayList<String>
                - m_adminList : ArrayList<String>
                - void interpret(String)
        }

        class ClientHandler {
                - m_state : State
                - m_sock : Socket
                - m_pseudonym : String
                - m_isAdmin : boolean
                - void interpret(String)
        }
}
'Fin package server'

Runnable<|--CommunicationHandler
Client"1"*--CommunicationHandler
Client"1"*--ConnexionWindow
ConnexionWindow"1"*--ChatClientWindow
ConnexionWindow"1"*--ConnexionAdminWindow
ConnexionAdminWindow"1"*--ChatAdminWindow

Server"1"*--"n"ClientHandler
Runnable<|--ClientHandler

@enduml